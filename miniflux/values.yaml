image:
  repository: ghcr.io/miniflux/miniflux
  pullPolicy: IfNotPresent
  tag: 2.0.47

controller:
  strategy: RollingUpdate

env:
  RUN_MIGRATIONS: 1
  BASE_URL:
    secretKeyRef:
      name: miniflux
      key: baseUrl
  DATABASE_URL:
    secretKeyRef:
      name: miniflux
      key: dbUrl

ingress:
  main:
    enabled: false
    ingressClassName: traefik
    hosts:
      - host: ""
        paths:
          - path: /
            pathType: Prefix

    tls:
      - secretName: miniflux-tls

service:
  main:
    ports:
      http:
        protocol: TCP
        port: 8080
        targetPort: 8080

resources:
  requests:
    cpu: 500m
    memory: 1Gi
  limits:
    memory: 2Gi


## Postgres config

postgresql:
  enabled: false
  nameOverride: miniflux-db
  fullnameOverride: miniflux-db

  global:
    storageClass: longhorn

    postgresql:
      auth:
        username: miniflux
        database: miniflux
        existingSecret: miniflux-db-secret

        secretKeys:
          adminPasswordKey: admin-password
          userPasswordKey: user-password
          replicationPasswordKey: replication-password
    auth:
      username: miniflux
      database: miniflux
      existingSecret: miniflux-db-secret

      secretKeys:
        adminPasswordKey: admin-password
        userPasswordKey: user-password
        replicationPasswordKey: replication-password

    primary:
      persistence:
        size: 1Gi
